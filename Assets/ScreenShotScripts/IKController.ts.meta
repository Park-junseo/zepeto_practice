fileFormatVersion: 2
guid: e2fb2ea499cb545fea08a6739dd8333a
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ZEPETO_Character_Controller_1
    = require(\"ZEPETO.Character.Controller\");\r\nclass IKController extends ZEPETO_Script_1.ZepetoScriptBehaviour
    {\r\n    constructor() {\r\n        super(...arguments);\r\n        // Body and
    head weight setting for target\r\n        // Controls how strongly the body reacts
    to the movement of the target\r\n        this.bodyWeight = 0.7;\r\n        this.headWeight
    = 0.7;\r\n        //Whether or not to apply IK\r\n        this.useIKWeight =
    false;\r\n        this.rightAramBones = [\r\n            //HumanBodyBones.RightHand,\r\n           
    UnityEngine_1.HumanBodyBones.RightLowerArm,\r\n            UnityEngine_1.HumanBodyBones.RightUpperArm,\r\n           
    //HumanBodyBones.RightShoulder,\r\n        ];\r\n    }\r\n    Start() {\r\n       
    this.animator = this.GetComponent($typeof(UnityEngine_1.Animator));\r\n       
    //Disable IK weight initially, and use it when changing to selfie mode\r\n       
    this.SetIKWeightActive(false);\r\n    }\r\n    //Toggle IK weight on/off\r\n   
    SetIKWeightActive(active) {\r\n        this.useIKWeight = active;\r\n    }\r\n   
    // Set Target to look at and Grip to reach out\r\n    SetTargetAndGrip(lookAtTarget,
    gripTarget, bodySource) {\r\n        this.lookAtTarget = lookAtTarget;\r\n       
    this.gripTarget = gripTarget;\r\n        this.bodySource = bodySource;\r\n   
    }\r\n    OnAnimatorIK(layerIndex) {\r\n        // IK is not using IK, Third-person
    mode\r\n        if (!this.useIKWeight) {\r\n            return;\r\n        }\r\n       
    // When using IK, Selfie mode\r\n        if (this.animator == null ||\r\n           
    this.lookAtTarget == null ||\r\n            this.gripTarget == null)\r\n           
    return;\r\n        // this.rightAramBones.forEach((bones)=>{\r\n        //    
    this.animator.SetBoneLocalRotation(bones, this.ikRotation);\r\n        // });\r\n       
    // this.animator.SetBoneLocalRotation(HumanBodyBones.RightShoulder, Quaternion.Euler(new
    Vector3(174, -1, -85)));\r\n        // this.animator.SetBoneLocalRotation(HumanBodyBones.UpperChest,
    Quaternion.Euler(new Vector3(4, 5, 0)));\r\n        // this.animator.SetBoneLocalRotation(HumanBodyBones.Chest,
    Quaternion.Euler(new Vector3(3, 0, 0)));\r\n        // const forward = ZepetoPlayers.instance.ZepetoCamera.cameraParent.forward;\r\n       
    // forward.y = 0;\r\n        // const look = ZepetoPlayers.instance.ZepetoCamera.cameraParent.position
    + forward*-3\r\n        const playerTransform = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoPlayer.character.transform;\r\n       
    // Set the look weight when the body and head looks at the target. \r\n       
    this.animator.SetLookAtWeight(1, this.bodyWeight, this.headWeight);\r\n       
    // set lookAt target\r\n        // this.animator.SetLookAtPosition(this.lookAtTarget.position);\r\n       
    // this.animator.SetLookAtPosition(look);\r\n        //this.animator.SetLookAtPosition(ZepetoPlayers.instance.ZepetoCamera.cameraParent.position);\r\n       
    this.animator.SetLookAtPosition(UnityEngine_1.Vector3.op_Addition(playerTransform.position,
    UnityEngine_1.Vector3.op_Multiply(playerTransform.forward, 3)));\r\n        //
    console.log(`[IKController] ${ZepetoPlayers.instance.LocalPlayer.movingAxis.position.ToString()}`);\r\n       
    // this.animator.SetIKRotationWeight(AvatarIKGoal.RightHand, 1);\r\n        //
    this.animator.SetIKRotation(AvatarIKGoal.RightHand, this.gripTarget.rotation);//Quaternion.Euler(new
    Vector3(3,-3,3)));\r\n        // this.animator.SetIKRotationWeight(AvatarIKGoal.RightHand,
    1);\r\n        // this.animator.SetIKRotation(AvatarIKGoal.RightHand, this.ikRotation);//Quaternion.Euler(new
    Vector3(3,-3,3)));\r\n        // Set target weight for rightHand\r\n        this.animator.SetIKPositionWeight(UnityEngine_1.AvatarIKGoal.RightHand,
    1);\r\n        // Set the rightHand to Grip where it extends\r\n        //this.animator.SetIKPosition(AvatarIKGoal.RightHand,
    this.gripTarget.position);\r\n        // this.animator.SetIKPosition(AvatarIKGoal.RightHand,
    this.gripTarget.position);\r\n        // this.animator.SetIKPosition(AvatarIKGoal.RightHand,
    look+this.gripTarget.position);\r\n        this.animator.SetIKPosition(UnityEngine_1.AvatarIKGoal.RightHand,
    UnityEngine_1.Vector3.op_Addition(playerTransform.position, UnityEngine_1.Vector3.op_Multiply(playerTransform.right,
    3)));\r\n        //console.log(`[OnAnimatorIK] ${this.gripTarget.gameObject.name}/${this.lookAtTarget.gameObject.name}:
    ${this.gripTarget.position.ToString()}/${this.lookAtTarget.position.ToString()}`);\r\n   
    }\r\n    LateUpdate() {\r\n        this.ikRotation = UnityEngine_1.Quaternion.FromToRotation(this.bodySource.position,
    this.gripTarget.position);\r\n        // this.ikPosition = ZepetoPlayers.instance.ZepetoCamera.cameraParent.transform.position;\r\n       
    // console.log(this.ikPosition.ToString());\r\n        // this.animator.SetBoneLocalRotation(HumanBodyBones.Chest,
    Quaternion.Euler(new Vector3(3, 0, 0)));\r\n    }\r\n}\r\nexports.default = IKController;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSUtDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiSUtDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQXFEO0FBQ3JELDZDQUFxRztBQUNyRyw2RUFBMEU7QUFFMUUsTUFBcUIsWUFBYSxTQUFRLHFDQUFxQjtJQUEvRDs7UUFTSSwwQ0FBMEM7UUFDMUMsc0VBQXNFO1FBQzlELGVBQVUsR0FBVyxHQUFHLENBQUM7UUFDekIsZUFBVSxHQUFXLEdBQUcsQ0FBQztRQUVqQyw0QkFBNEI7UUFDcEIsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFNN0IsbUJBQWMsR0FBRztZQUNyQiwyQkFBMkI7WUFDM0IsNEJBQWMsQ0FBQyxhQUFhO1lBQzVCLDRCQUFjLENBQUMsYUFBYTtZQUM1QiwrQkFBK0I7U0FFbEMsQ0FBQTtJQWlGTCxDQUFDO0lBL0VHLEtBQUs7UUFDRCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxZQUFZLFNBQUMsc0JBQVEsRUFBRyxDQUFDO1FBQzlDLHNFQUFzRTtRQUN0RSxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVELHlCQUF5QjtJQUNsQixpQkFBaUIsQ0FBQyxNQUFlO1FBQ3BDLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO0lBQzlCLENBQUM7SUFFRCw4Q0FBOEM7SUFDdkMsZ0JBQWdCLENBQUMsWUFBdUIsRUFBRSxVQUFxQixFQUFFLFVBQXFCO1FBQ3pGLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0lBQ2pDLENBQUM7SUFFRCxZQUFZLENBQUMsVUFBa0I7UUFFM0Isd0NBQXdDO1FBQ3hDLElBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ2xCLE9BQU87U0FDVjtRQUVELDZCQUE2QjtRQUM3QixJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSTtZQUNyQixJQUFJLENBQUMsWUFBWSxJQUFJLElBQUk7WUFDekIsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJO1lBQ3ZCLE9BQU87UUFFWCx5Q0FBeUM7UUFDekMsa0VBQWtFO1FBQ2xFLE1BQU07UUFFTixpSEFBaUg7UUFDakgseUdBQXlHO1FBQ3pHLG9HQUFvRztRQUNwRyw0RUFBNEU7UUFDNUUsaUJBQWlCO1FBRWpCLHNGQUFzRjtRQUV0RixNQUFNLGVBQWUsR0FBRywyQ0FBYSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7UUFFNUYsbUVBQW1FO1FBQ25FLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNuRSxvQkFBb0I7UUFDcEIsK0RBQStEO1FBQy9ELHlDQUF5QztRQUN6Qyw2RkFBNkY7UUFFN0YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FwRmtCLHFCQUFPLENBZ0hzd2hCLFdBQVksQ0E1QjF5aEIsZUFBZSxDQUFDLFFBQVEsRUFwRlAscUJBQU8sQ0FnSHNpaUIsV0FBWSxDQTVCL2lpQixlQUFlLENBQUMsT0FBTyxFQUFDLENBQUMsR0FBQyxDQUFDO1FBRXRGLHNHQUFzRztRQUN0RyxnRUFBZ0U7UUFDaEUsMEhBQTBIO1FBRTFILGdFQUFnRTtRQUNoRSxpSEFBaUg7UUFFakgsa0NBQWtDO1FBQ2xDLElBQUksQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUMsMEJBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0QsNkNBQTZDO1FBQzdDLGdGQUFnRjtRQUVoRixpRkFBaUY7UUFDakYsc0ZBQXNGO1FBQ3RGLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLDBCQUFZLENBQUMsU0FBUyxFQXBHRCxxQkFBTyxDQWdIc3doQixXQUFZLENBWnR4aEIsZUFBZSxDQUFDLFFBQVEsRUFwRzNCLHFCQUFPLENBZ0hzaWlCLFdBQVksQ0FaM2hpQixlQUFlLENBQUMsS0FBSyxFQUFDLENBQUMsR0FBQyxDQUFDO1FBRXhHLHlMQUF5TDtJQUM3TCxDQUFDO0lBRUQsVUFBVTtRQUNOLElBQUksQ0FBQyxVQUFVLEdBQUcsd0JBQVUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoRyx5RkFBeUY7UUFDekYsMkNBQTJDO1FBQzNDLG9HQUFvRztJQUN4RyxDQUFDO0NBQ0o7QUE1R0QsK0JBNEdDIn0=","assetPath":"Assets/ScreenShotScripts/IKController.ts","manifest":{"properties":[],"name":"IKController","description":""},"isCompiled":true}'
  typescriptHash: 69a97f15cc5ab5c2cf6c643af25abea2
  onlyWriteTrigger: 0
